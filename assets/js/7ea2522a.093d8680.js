"use strict";(self.webpackChunkgrblhal=self.webpackChunkgrblhal||[]).push([[696],{8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var o=s(6540);const r={},t=o.createContext(r);function l(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(t.Provider,{value:n},e.children)}},8455:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"Guides/automatic-tool-changer","title":"Tool Changes & Offsets","description":"Changing tools mid-job allows you to use different end mills (e.g., roughing, finishing, v-carving) in a single project. grblHAL supports standard G-code tool change commands (M6) and length offsets (G43).","source":"@site/docs/05-Guides/automatic-tool-changer.md","sourceDirName":"05-Guides","slug":"/Guides/automatic-tool-changer","permalink":"/grblhal_docs/Guides/automatic-tool-changer","draft":false,"unlisted":false,"editUrl":"https://github.com/PETERVANDERWALT/grblhal_docs/tree/main/docs/05-Guides/automatic-tool-changer.md","tags":[],"version":"current","frontMatter":{"title":"Tool Changes & Offsets"},"sidebar":"docsSidebar","previous":{"title":"System Commands Reference","permalink":"/grblhal_docs/Reference/system-commands-reference"},"next":{"title":"Probing Guide","permalink":"/grblhal_docs/Guides/probing"}}');var r=s(4848),t=s(8453);const l={title:"Tool Changes & Offsets"},i="Tool Changes & Offsets",c={},h=[{value:"The Basic Tool Change (<code>M6</code>)",id:"the-basic-tool-change-m6",level:2},{value:"Solving the Length Problem",id:"solving-the-length-problem",level:2},{value:"<strong>Strategy 1: Re-Zero Z (Simple)</strong>",id:"strategy-1-re-zero-z-simple",level:3},{value:"<strong>Strategy 2: Tool Length Offsets (Professional)</strong>",id:"strategy-2-tool-length-offsets-professional",level:3},{value:"Configuring grblHAL for Tool Changes",id:"configuring-grblhal-for-tool-changes",level:2},{value:"<strong>Example Macro: Semi-Auto Tool Change</strong>",id:"example-macro-semi-auto-tool-change",level:3},{value:"<strong>Settings Used</strong>",id:"settings-used",level:3},{value:"Automatic Tool Changers (ATC)",id:"automatic-tool-changers-atc",level:2},{value:"Best Practices",id:"best-practices",level:2}];function a(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"tool-changes--offsets",children:"Tool Changes & Offsets"})}),"\n",(0,r.jsxs)(n.p,{children:["Changing tools mid-job allows you to use different end mills (e.g., roughing, finishing, v-carving) in a single project. grblHAL supports standard G-code tool change commands (",(0,r.jsx)(n.code,{children:"M6"}),") and length offsets (",(0,r.jsx)(n.code,{children:"G43"}),")."]}),"\n",(0,r.jsxs)(n.h2,{id:"the-basic-tool-change-m6",children:["The Basic Tool Change (",(0,r.jsx)(n.code,{children:"M6"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["By default, when grblHAL encounters an ",(0,r.jsx)(n.code,{children:"M6 T<n>"})," command:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["It stops the spindle (",(0,r.jsx)(n.code,{children:"M5"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"It pauses the program (Feed Hold)."}),"\n",(0,r.jsx)(n.li,{children:"It waits for you to physically change the tool."}),"\n",(0,r.jsxs)(n.li,{children:["It waits for you to press ",(0,r.jsx)(n.strong,{children:"Cycle Start"})," to resume."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Problem:"})," The new tool is likely a different length than the old one. If you just resume, your Z-zero will be wrong, and you'll cut air or crash into the bed."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"solving-the-length-problem",children:"Solving the Length Problem"}),"\n",(0,r.jsx)(n.p,{children:"You have two main strategies:"}),"\n",(0,r.jsx)(n.h3,{id:"strategy-1-re-zero-z-simple",children:(0,r.jsx)(n.strong,{children:"Strategy 1: Re-Zero Z (Simple)"})}),"\n",(0,r.jsx)(n.p,{children:"After changing the tool, you manually re-probe or re-zero the Z-axis to the top of the stock."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Job Pauses (",(0,r.jsx)(n.code,{children:"M6"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Change Tool."}),"\n",(0,r.jsx)(n.li,{children:"Jog to a clear spot."}),"\n",(0,r.jsx)(n.li,{children:"Probe Z / Set Z Zero."}),"\n",(0,r.jsx)(n.li,{children:"Resume Job."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pros:"})," Simple, works with any sender.\n",(0,r.jsx)(n.strong,{children:"Cons:"})," Risk of losing X/Y position if you move the machine too much; requires accessible stock surface."]}),"\n",(0,r.jsx)(n.h3,{id:"strategy-2-tool-length-offsets-professional",children:(0,r.jsx)(n.strong,{children:"Strategy 2: Tool Length Offsets (Professional)"})}),"\n",(0,r.jsxs)(n.p,{children:["This method uses ",(0,r.jsx)(n.code,{children:"G43"})," to compensate for the difference in length between tools."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Concept:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reference Tool (T1):"})," The tool you set Z-zero with. Length Offset = 0."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"New Tool (T2):"})," Longer or shorter than T1."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Offset (H2):"})," The difference in length."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Workflow:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Measure T1:"})," Touch off T1 on a fixed sensor (tool setter). Store this position."]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Run Job with T1."})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Change to T2."})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Measure T2:"})," Touch off T2 on the ",(0,r.jsx)(n.em,{children:"same"})," fixed sensor."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Calculate Difference:"})," ",(0,r.jsx)(n.code,{children:"Offset = T2_Position - T1_Position"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Apply Offset:"})," ",(0,r.jsx)(n.code,{children:"G43 H2"})," automatically adjusts Z."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"configuring-grblhal-for-tool-changes",children:"Configuring grblHAL for Tool Changes"}),"\n",(0,r.jsxs)(n.p,{children:["You typically handle tool changes via your ",(0,r.jsx)(n.strong,{children:"Sender Software"})," (ioSender, UGS, etc.) using macros."]}),"\n",(0,r.jsx)(n.h3,{id:"example-macro-semi-auto-tool-change",children:(0,r.jsx)(n.strong,{children:"Example Macro: Semi-Auto Tool Change"})}),"\n",(0,r.jsx)(n.p,{children:"A typical macro for a machine with a fixed tool setter:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-gcode",children:"; --- Tool Change Detected ---\nM5              ; Stop Spindle\nG53 G0 Z0       ; Lift Z to safe height\nG53 G0 X0 Y0    ; Move to tool change position (front-left)\nM0              ; Pause for user to change tool\n\n; --- User Changes Tool & Presses Start ---\nG53 G0 X200 Y200 ; Move to Tool Setter location\nG38.2 Z-100 F300 ; Fast probe down\nG91 G0 Z2       ; Retract 2mm\nG38.2 Z-5 F50   ; Slow probe for accuracy\nG10 L20 P1 Z... ; Update Z offset (Logic depends on sender script)\nG53 G0 Z0       ; Retract safely\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," Advanced senders like ",(0,r.jsx)(n.strong,{children:"ioSender"}),' have built-in "Tool Change" tabs where you simply enter the position of your tool setter, and it handles the math automatically.']}),"\n",(0,r.jsx)(n.h3,{id:"settings-used",children:(0,r.jsx)(n.strong,{children:"Settings Used"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"$341"})}),": Tool Change Mode (if enabled in firmware)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"$342"})}),": Tool Change Probing Distance."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"$343"})}),": Tool Change Locate Feed Rate."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"automatic-tool-changers-atc",children:"Automatic Tool Changers (ATC)"}),"\n",(0,r.jsx)(n.p,{children:"For machines with an automatic spindle (ISO20/30, BT30) and a tool rack:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requires specialized hardware"})," (pneumatic drawbar, tool forks, sensors)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requires Macros:"})," Custom M6 macros to handle the pick-and-place logic."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Requires I/O:"})," Inputs/Outputs for Drawbar Open/Close, Dust Shoe Open/Close."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["grblHAL is fully capable of driving ATCs, but it requires compiling a custom build with the ",(0,r.jsx)(n.strong,{children:"ATC Plugin"})," or writing complex macros."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Relevant Settings:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"$675"})}),": Macro ATC Options (Enable ",(0,r.jsx)(n.code,{children:"M6 T0"}),", enforce ",(0,r.jsx)(n.code,{children:"tc.macro"})," presence)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"$683"})}),": ATCi Configuration (Rack monitoring and keepout zones)."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'Always use a "Safe Z" height'})," before moving to the tool change position."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clean the collet"})," every change. Dust adds runout."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Measure twice."})," If using offsets, verify the first tool change carefully."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next:"})," Explore specialized spindle and laser capabilities: ",(0,r.jsx)(n.a,{href:"/grblhal_docs/Guides/spindles-and-lasers",children:"Spindles & Lasers Setup"})]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);